<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Getting Started - Solana: Blockchain Rebuilt for Scale</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400|Poppins:300,400" rel="stylesheet">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <img src="https://manuel-calavera.github.io/images/logo.png" alt="">
            <ol class="chapter"><li><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><a href="terminology.html"><strong aria-hidden="true">2.</strong> Terminology</a></li><li><a href="getting-started.html" class="active"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li><a href="webwallet.html"><strong aria-hidden="true">3.1.</strong> Example: Web Wallet</a></li></ol></li><li><a href="programs.html"><strong aria-hidden="true">4.</strong> Programming Model</a></li><li><ol class="section"><li><a href="tictactoe.html"><strong aria-hidden="true">4.1.</strong> Example: Tic-Tac-Toe</a></li><li><a href="drones.html"><strong aria-hidden="true">4.2.</strong> Drones</a></li></ol></li><li><a href="cluster.html"><strong aria-hidden="true">5.</strong> A Solana Cluster</a></li><li><ol class="section"><li><a href="synchronization.html"><strong aria-hidden="true">5.1.</strong> Synchronization</a></li><li><a href="leader-rotation.html"><strong aria-hidden="true">5.2.</strong> Leader Rotation</a></li><li><a href="fork-generation.html"><strong aria-hidden="true">5.3.</strong> Fork Generation</a></li></ol></li><li><a href="fullnode.html"><strong aria-hidden="true">6.</strong> Anatomy of a Fullnode</a></li><li><ol class="section"><li><a href="tpu.html"><strong aria-hidden="true">6.1.</strong> TPU</a></li><li><a href="tvu.html"><strong aria-hidden="true">6.2.</strong> TVU</a></li><li><a href="gossip.html"><strong aria-hidden="true">6.3.</strong> Gossip Service</a></li><li><a href="runtime.html"><strong aria-hidden="true">6.4.</strong> The Runtime</a></li></ol></li><li><a href="proposals.html"><strong aria-hidden="true">7.</strong> Proposed Architectural Changes</a></li><li><ol class="section"><li><a href="ledger-replication.html"><strong aria-hidden="true">7.1.</strong> Ledger Replication</a></li><li><a href="enclave.html"><strong aria-hidden="true">7.2.</strong> Secure Enclave</a></li><li><a href="staking-rewards.html"><strong aria-hidden="true">7.3.</strong> Staking Rewards</a></li><li><a href="fork-selection.html"><strong aria-hidden="true">7.4.</strong> Fork Selection</a></li><li><a href="entry-tree.html"><strong aria-hidden="true">7.5.</strong> Entry Tree</a></li></ol></li><li><a href="appendix.html"><strong aria-hidden="true">8.</strong> Appendix</a></li><li><ol class="section"><li><a href="jsonrpc-api.html"><strong aria-hidden="true">8.1.</strong> JSON RPC API</a></li><li><a href="javascript-api.html"><strong aria-hidden="true">8.2.</strong> JavaScript API</a></li><li><a href="wallet.html"><strong aria-hidden="true">8.3.</strong> solana-wallet CLI</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            
                            
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Solana: Blockchain Rebuilt for Scale</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#getting-started" id="getting-started"><h1>Getting Started</h1></a>
<p>The Solana git repository contains all the scripts you might need to spin up your
own local testnet. Depending on what you're looking to achieve, you may want to
run a different variation, as the full-fledged, performance-enhanced
multinode testnet is considerably more complex to set up than a Rust-only,
singlenode testnode.  If you are looking to develop high-level features, such
as experimenting with smart contracts, save yourself some setup headaches and
stick to the Rust-only singlenode demo.  If you're doing performance optimization
of the transaction pipeline, consider the enhanced singlenode demo. If you're
doing consensus work, you'll need at least a Rust-only multinode demo. If you want
to reproduce our TPS metrics, run the enhanced multinode demo.</p>
<p>For all four variations, you'd need the latest Rust toolchain and the Solana
source code:</p>
<p>First, install Rust's package manager Cargo.</p>
<pre><code class="language-bash">$ curl https://sh.rustup.rs -sSf | sh
$ source $HOME/.cargo/env
</code></pre>
<p>Now checkout the code from github:</p>
<pre><code class="language-bash">$ git clone https://github.com/solana-labs/solana.git
$ cd solana
</code></pre>
<p>The demo code is sometimes broken between releases as we add new low-level
features, so if this is your first time running the demo, you'll improve
your odds of success if you check out the
<a href="https://github.com/solana-labs/solana/releases">latest release</a>
before proceeding:</p>
<pre><code class="language-bash">$ TAG=$(git describe --tags $(git rev-list --tags --max-count=1))
$ git checkout $TAG
</code></pre>
<a class="header" href="#configuration-setup" id="configuration-setup"><h3>Configuration Setup</h3></a>
<p>The network is initialized with a genesis ledger and fullnode configuration files.
These files can be generated by running the following script.</p>
<pre><code class="language-bash">$ ./multinode-demo/setup.sh
</code></pre>
<a class="header" href="#drone" id="drone"><h3>Drone</h3></a>
<p>In order for the fullnodes and clients to work, we'll need to
spin up a drone to give out some test tokens.  The drone delivers Milton
Friedman-style &quot;air drops&quot; (free tokens to requesting clients) to be used in
test transactions.</p>
<p>Start the drone with:</p>
<pre><code class="language-bash">$ ./multinode-demo/drone.sh
</code></pre>
<a class="header" href="#singlenode-testnet" id="singlenode-testnet"><h3>Singlenode Testnet</h3></a>
<p>Before you start a fullnode, make sure you know the IP address of the machine you
want to be the bootstrap leader for the demo, and make sure that udp ports 8000-10000 are
open on all the machines you want to test with.</p>
<p>Now start the bootstrap leader in a separate shell:</p>
<pre><code class="language-bash">$ ./multinode-demo/bootstrap-leader.sh
</code></pre>
<p>Wait a few seconds for the server to initialize. It will print &quot;leader ready...&quot; when it's ready to
receive transactions. The leader will request some tokens from the drone if it doesn't have any.
The drone does not need to be running for subsequent leader starts.</p>
<a class="header" href="#multinode-testnet" id="multinode-testnet"><h3>Multinode Testnet</h3></a>
<p>To run a multinode testnet, after starting a leader node, spin up some
additional full nodes in separate shells:</p>
<pre><code class="language-bash">$ ./multinode-demo/fullnode-x.sh
</code></pre>
<p>To run a performance-enhanced full node on Linux,
<a href="https://developer.nvidia.com/cuda-downloads">CUDA 10.0</a> must be installed on
your system:</p>
<pre><code class="language-bash">$ ./fetch-perf-libs.sh
$ SOLANA_CUDA=1 ./multinode-demo/bootstrap-leader.sh
$ SOLANA_CUDA=1 ./multinode-demo/fullnode-x.sh
</code></pre>
<a class="header" href="#testnet-client-demo" id="testnet-client-demo"><h3>Testnet Client Demo</h3></a>
<p>Now that your singlenode or multinode testnet is up and running let's send it
some transactions!</p>
<p>In a separate shell start the client:</p>
<pre><code class="language-bash">$ ./multinode-demo/client.sh # runs against localhost by default
</code></pre>
<p>What just happened? The client demo spins up several threads to send 500,000 transactions
to the testnet as quickly as it can. The client then pings the testnet periodically to see
how many transactions it processed in that time. Take note that the demo intentionally
floods the network with UDP packets, such that the network will almost certainly drop a
bunch of them. This ensures the testnet has an opportunity to reach 710k TPS. The client
demo completes after it has convinced itself the testnet won't process any additional
transactions. You should see several TPS measurements printed to the screen. In the
multinode variation, you'll see TPS measurements for each validator node as well.</p>
<a class="header" href="#testnet-debugging" id="testnet-debugging"><h3>Testnet Debugging</h3></a>
<p>There are some useful debug messages in the code, you can enable them on a per-module and per-level
basis.  Before running a leader or validator set the normal RUST_LOG environment variable.</p>
<p>For example</p>
<ul>
<li>
<p>To enable <code>info</code> everywhere and <code>debug</code> only in the solana::banking_stage module:</p>
<pre><code class="language-bash">$ export RUST_LOG=solana=info,solana::banking_stage=debug
</code></pre>
</li>
<li>
<p>To enable BPF program logging:</p>
<pre><code class="language-bash">$ export RUST_LOG=solana_bpf_loader=trace
</code></pre>
</li>
</ul>
<p>Generally we are using <code>debug</code> for infrequent debug messages, <code>trace</code> for potentially frequent
messages and <code>info</code> for performance-related logging.</p>
<p>You can also attach to a running process with GDB.  The leader's process is named
<em>solana-fullnode</em>:</p>
<pre><code class="language-bash">$ sudo gdb
attach &lt;PID&gt;
set logging on
thread apply all bt
</code></pre>
<p>This will dump all the threads stack traces into gdb.txt</p>
<a class="header" href="#public-testnet" id="public-testnet"><h2>Public Testnet</h2></a>
<p>In this example the client connects to our public testnet. To run validators on the testnet you would need to open udp ports <code>8000-10000</code>.</p>
<pre><code class="language-bash">$ ./multinode-demo/client.sh --network $(dig +short testnet.solana.com):8001 --duration 60
</code></pre>
<p>You can observe the effects of your client's transactions on our <a href="https://metrics.solana.com:3000/d/testnet/testnet-hud?orgId=2&amp;from=now-30m&amp;to=now&amp;refresh=5s&amp;var-testnet=testnet">dashboard</a></p>
<a class="header" href="#linux-snap" id="linux-snap"><h2>Linux Snap</h2></a>
<p>A Linux <a href="https://snapcraft.io/">Snap</a> is available, which can be used to easily
get Solana running on supported Linux systems without building anything from
source for evaluation.  Note that CUDA is not supported by the Snap so
performance will be limited.</p>
<p>The <code>edge</code> Snap channel is updated daily with the latest
development from the <code>master</code> branch.  To install:</p>
<pre><code class="language-bash">$ sudo snap install solana --edge --devmode
</code></pre>
<p>Once installed the usual Solana programs will be available as <code>solona.*</code> instead
of <code>solana-*</code>.  For example, <code>solana.fullnode</code> instead of <code>solana-fullnode</code>.</p>
<p>Update to the latest version at any time with:</p>
<pre><code class="language-bash">$ snap info solana
$ sudo snap refresh solana --devmode
</code></pre>
<a class="header" href="#daemon-support" id="daemon-support"><h3>Daemon Support</h3></a>
<p>The snap supports running fullnodes and a drone as system daemons.</p>
<p>Run <code>sudo snap get solana</code> to view the current daemon configuration.  To view
daemon logs:</p>
<ol>
<li>Run <code>sudo snap logs -n=all solana</code> to view the daemon initialization log</li>
<li>Runtime logging can be found under <code>/var/snap/solana/current/bootstrap-leader/</code>,
<code>/var/snap/solana/current/fullnode/</code>, or <code>/var/snap/solana/current/drone/</code> depending
on which <code>mode=</code> was selected.  Within each log directory the file <code>current</code>
contains the latest log, and the files <code>*.s</code> (if present) contain older rotated
logs.</li>
</ol>
<p>Disable the daemon at any time by running:</p>
<pre><code class="language-bash">$ sudo snap set solana mode=
</code></pre>
<p>Runtime configuration files for the daemon can be found in
<code>/var/snap/solana/current/config</code>.</p>
<a class="header" href="#leader-daemon" id="leader-daemon"><h4>Leader Daemon</h4></a>
<pre><code class="language-bash">$ sudo snap set solana mode=bootstrap-leader
</code></pre>
<p><code>rsync</code> must be configured and running on the leader.</p>
<ol>
<li>Ensure rsync is installed with <code>sudo apt-get -y install rsync</code></li>
<li>Edit <code>/etc/rsyncd.conf</code> to include the following</li>
</ol>
<pre><code class="language-ini">[config]
path = /var/snap/solana/current/config
hosts allow = *
read only = true
</code></pre>
<ol start="3">
<li>Run <code>sudo systemctl enable rsync; sudo systemctl start rsync</code></li>
<li>Test by running <code>rsync -Pzravv rsync://&lt;ip-address-of-leader&gt;/config solana-config</code> from another machine.  <strong>If the leader is running on a cloud
provider it may be necessary to configure the Firewall rules to permit ingress
to port tcp:873, tcp:9900 and the port range udp:8000-udp:10000</strong></li>
</ol>
<p>To run both the Leader and Drone:</p>
<pre><code class="language-bash">$ sudo snap set solana mode=bootstrap-leader+drone

</code></pre>
<a class="header" href="#validator-daemon" id="validator-daemon"><h4>Validator daemon</h4></a>
<pre><code class="language-bash">$ sudo snap set solana mode=fullnode

</code></pre>
<p>By default the node will attempt to connect to <strong>testnet.solana.com</strong>, override the
cluster entrypoint IP address by running:</p>
<pre><code class="language-bash">$ sudo snap set solana mode=fullnode entrypoint-ip=127.0.0.1 #&lt;-- change IP address
</code></pre>
<p>It's assumed that the node at the entrypoint IP will be running <code>rsync</code>
configured as described in the previous <strong>Leader daemon</strong> section.</p>

                    </main>
                </div>
            </div>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
